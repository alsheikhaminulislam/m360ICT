<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HR Management API Tester</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        .response-box {
            max-height: 400px;
            overflow-y: auto;
        }

        pre {
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .sidebar {
            transition: width 0.3s ease;
        }

        .sidebar.collapsed {
            width: 60px;
        }

        .sidebar-content {
            transition: opacity 0.3s ease;
        }

        .sidebar.collapsed .sidebar-text {
            display: none;
        }

        .sidebar.collapsed .sidebar-header {
            justify-content: center;
        }

        .sidebar.collapsed nav {
            padding-left: 0.5rem;
            padding-right: 0.5rem;
        }

        .sidebar.collapsed nav a {
            justify-content: center;
            padding-left: 0;
            padding-right: 0;
            gap: 0;
        }

        .main-content {
            transition: margin-left 0.3s ease;
        }

        .endpoint-section {
            transition: max-height 0.3s ease, opacity 0.3s ease;
            overflow: hidden;
        }

        .endpoint-section.collapsed {
            max-height: 0;
            opacity: 0;
        }

        .material-icons {
            font-size: 20px;
        }
    </style>
</head>

<body class="bg-gray-50">
    <!-- Sidebar -->
    <div id="sidebar" class="sidebar fixed left-0 top-0 h-full bg-white shadow-lg z-50 w-64">
        <div class="sidebar-header p-4 border-b flex items-center justify-between">
            <h2 class="sidebar-text text-lg font-semibold text-gray-800">API Sections</h2>
            <button type="button" onclick="toggleSidebar()" class="p-2 hover:bg-gray-100 rounded-lg shrink-0">
                <span class="material-icons text-gray-600" id="sidebarIcon">menu</span>
            </button>
        </div>

        <nav class="p-4 space-y-2">
            <a href="#config"
                class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 rounded-lg transition"
                title="Configuration">
                <span class="material-icons">settings</span>
                <span class="sidebar-text">Configuration</span>
            </a>
            <a href="#auth"
                class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 rounded-lg transition"
                title="Authentication">
                <span class="material-icons">lock</span>
                <span class="sidebar-text">Authentication</span>
            </a>
            <a href="#employees"
                class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 rounded-lg transition"
                title="Employees">
                <span class="material-icons">people</span>
                <span class="sidebar-text">Employees</span>
            </a>
            <a href="#attendance"
                class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 rounded-lg transition"
                title="Attendance">
                <span class="material-icons">event</span>
                <span class="sidebar-text">Attendance</span>
            </a>
            <a href="#reports"
                class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 rounded-lg transition"
                title="Reports">
                <span class="material-icons">assessment</span>
                <span class="sidebar-text">Reports</span>
            </a>
        </nav>
    </div>

    <!-- Main Content -->
    <div id="mainContent" class="main-content ml-64 min-h-screen">
        <!-- Header -->
        <div class="bg-indigo-600 text-white py-6 shadow-md">
            <div class="container mx-auto px-6">
                <h1 class="text-3xl font-bold mb-1">HR Management API Tester</h1>
                <p class="text-indigo-100">Test all endpoints with an interactive interface</p>
            </div>
        </div>

        <div class="container mx-auto px-6 py-8">
            <!-- Configuration Panel -->
            <div id="config" class="bg-white rounded-lg shadow-md p-6 mb-6">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center gap-2">
                        <span class="material-icons text-indigo-600">settings</span>
                        <h2 class="text-xl font-semibold text-gray-800">Configuration</h2>
                    </div>
                    <button type="button" onclick="toggleSection('config-content')"
                        class="p-2 hover:bg-gray-100 rounded-lg">
                        <span class="material-icons text-gray-600">expand_more</span>
                    </button>
                </div>
                <div id="config-content" class="endpoint-section">
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Base URL</label>
                            <input type="text" id="baseUrl" value="http://localhost:3000"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Auth Token (Bearer)</label>
                            <input type="text" id="authToken" placeholder="Paste token after login"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Authentication -->
            <div id="auth" class="bg-white rounded-lg shadow-md overflow-hidden mb-6">
                <div class="bg-indigo-600 px-6 py-4 flex items-center justify-between">
                    <div class="flex items-center gap-2 text-white">
                        <span class="material-icons">lock</span>
                        <h3 class="text-lg font-semibold">Authentication</h3>
                    </div>
                    <button type="button" onclick="toggleSection('auth-content')"
                        class="p-2 hover:bg-indigo-700 rounded-lg">
                        <span class="material-icons text-white">expand_more</span>
                    </button>
                </div>
                <div id="auth-content" class="endpoint-section p-6">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="px-3 py-1 bg-green-100 text-green-700 rounded-md font-semibold text-sm">POST</span>
                        <span class="text-gray-700 font-mono">/auth/login</span>
                    </div>
                    <textarea id="login-body" rows="3"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg mb-3 font-mono text-sm">
{
  "email": "hr@example.com",
  "password": "password123"
}</textarea>
                    <button type="button"
                        onclick="sendRequest('POST', '/auth/login', 'login-body', false, 'login-response')"
                        class="px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition flex items-center gap-2">
                        <span class="material-icons text-sm">send</span>
                        Send Request
                    </button>
                    <div id="login-response" class="mt-4"></div>
                </div>
            </div>

            <!-- Employees -->
            <div id="employees" class="bg-white rounded-lg shadow-md overflow-hidden mb-6">
                <div class="bg-blue-600 px-6 py-4 flex items-center justify-between">
                    <div class="flex items-center gap-2 text-white">
                        <span class="material-icons">people</span>
                        <h3 class="text-lg font-semibold">Employees</h3>
                    </div>
                    <button type="button" onclick="toggleSection('employees-content')"
                        class="p-2 hover:bg-blue-700 rounded-lg">
                        <span class="material-icons text-white">expand_more</span>
                    </button>
                </div>
                <div id="employees-content" class="endpoint-section p-6 space-y-6">
                    <!-- Create Employee -->
                    <div class="border-b pb-6">
                        <div class="flex items-center gap-3 mb-3">
                            <span
                                class="px-3 py-1 bg-green-100 text-green-700 rounded-md font-semibold text-sm">POST</span>
                            <span class="text-gray-700 font-mono">/employees</span>
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Employee Details (JSON)</label>
                            <textarea id="create-employee-body" rows="8"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg mb-3 font-mono text-sm">
{
  "name": "Aminul Islam",
  "age": 32,
  "designation": "Project Manager",
  "hiring_date": "2020-03-01",
  "date_of_birth": "1991-12-10",
  "salary": 85000
}</textarea>
                        </div>
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Photo (Optional)</label>
                            <input type="file" id="create-employee-photo" accept="image/*"
                                class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                        </div>
                        <button type="button"
                            onclick="sendRequest('POST', '/employees', 'create-employee-body', true, 'create-employee-response', false, 'create-employee-photo')"
                            class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex items-center gap-2">
                            <span class="material-icons text-sm">add</span>
                            Create Employee
                        </button>
                        <div id="create-employee-response" class="mt-4"></div>
                    </div>

                    <!-- List Employees -->
                    <div class="border-b pb-6">
                        <div class="flex items-center gap-3 mb-3">
                            <span
                                class="px-3 py-1 bg-blue-100 text-blue-700 rounded-md font-semibold text-sm">GET</span>
                            <span class="text-gray-700 font-mono">/employees</span>
                        </div>
                        <input type="text" id="list-employees-params"
                            placeholder="?search=Aminul or ?search=page=1&limit=10"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg mb-3 font-mono text-sm">
                        <button type="button"
                            onclick="sendRequest('GET', '/employees', 'list-employees-params', true, 'list-employees-response', true)"
                            class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex items-center gap-2">
                            <span class="material-icons text-sm">list</span>
                            Get Employees
                        </button>
                        <div id="list-employees-response" class="mt-4"></div>
                    </div>

                    <!-- Get Employee by ID -->
                    <div class="border-b pb-6">
                        <div class="flex items-center gap-3 mb-3">
                            <span
                                class="px-3 py-1 bg-blue-100 text-blue-700 rounded-md font-semibold text-sm">GET</span>
                            <span class="text-gray-700 font-mono">/employees/:id</span>
                        </div>
                        <input type="number" id="get-employee-id" placeholder="Employee ID (e.g., 1)"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg mb-3">
                        <button type="button"
                            onclick="sendRequestById('GET', '/employees/', 'get-employee-id', true, 'get-employee-response')"
                            class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex items-center gap-2">
                            <span class="material-icons text-sm">person</span>
                            Get Employee
                        </button>
                        <div id="get-employee-response" class="mt-4"></div>
                    </div>

                    <!-- Update Employee -->
                    <div class="border-b pb-6">
                        <div class="flex items-center gap-3 mb-3">
                            <span
                                class="px-3 py-1 bg-yellow-100 text-yellow-700 rounded-md font-semibold text-sm">PUT</span>
                            <span class="text-gray-700 font-mono">/employees/:id</span>
                        </div>
                        <input type="number" id="update-employee-id" placeholder="Employee ID"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg mb-3">
                        <textarea id="update-employee-body" rows="4"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg mb-3 font-mono text-sm">
{
  "salary": 90000,
  "designation": "Senior Manager"
}</textarea>
                        <button type="button"
                            onclick="sendRequestById('PUT', '/employees/', 'update-employee-id', true, 'update-employee-response', 'update-employee-body')"
                            class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex items-center gap-2">
                            <span class="material-icons text-sm">edit</span>
                            Update Employee
                        </button>
                        <div id="update-employee-response" class="mt-4"></div>
                    </div>

                    <!-- Delete Employee -->
                    <div>
                        <div class="flex items-center gap-3 mb-3">
                            <span
                                class="px-3 py-1 bg-red-100 text-red-700 rounded-md font-semibold text-sm">DELETE</span>
                            <span class="text-gray-700 font-mono">/employees/:id</span>
                        </div>
                        <input type="number" id="delete-employee-id" placeholder="Employee ID"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg mb-3">
                        <button type="button"
                            onclick="sendRequestById('DELETE', '/employees/', 'delete-employee-id', true, 'delete-employee-response')"
                            class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition flex items-center gap-2">
                            <span class="material-icons text-sm">delete</span>
                            Delete Employee
                        </button>
                        <div id="delete-employee-response" class="mt-4"></div>
                    </div>
                </div>
            </div>

            <!-- Attendance -->
            <div id="attendance" class="bg-white rounded-lg shadow-md overflow-hidden mb-6">
                <div class="bg-green-600 px-6 py-4 flex items-center justify-between">
                    <div class="flex items-center gap-2 text-white">
                        <span class="material-icons">event</span>
                        <h3 class="text-lg font-semibold">Attendance</h3>
                    </div>
                    <button type="button" onclick="toggleSection('attendance-content')"
                        class="p-2 hover:bg-green-700 rounded-lg">
                        <span class="material-icons text-white">expand_more</span>
                    </button>
                </div>
                <div id="attendance-content" class="endpoint-section p-6 space-y-6">
                    <!-- Create/Update Attendance -->
                    <div class="border-b pb-6">
                        <div class="flex items-center gap-3 mb-3">
                            <span
                                class="px-3 py-1 bg-green-100 text-green-700 rounded-md font-semibold text-sm">POST</span>
                            <span class="text-gray-700 font-mono">/attendance</span>
                        </div>
                        <textarea id="create-attendance-body" rows="5"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg mb-3 font-mono text-sm">
{
  "employee_id": 1,
  "date": "2023-10-26",
  "check_in_time": "09:30:00"
}</textarea>
                        <button type="button"
                            onclick="sendRequest('POST', '/attendance', 'create-attendance-body', true, 'create-attendance-response')"
                            class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition flex items-center gap-2">
                            <span class="material-icons text-sm">check_circle</span>
                            Create/Update Attendance
                        </button>
                        <div id="create-attendance-response" class="mt-4"></div>
                    </div>

                    <!-- List Attendance -->
                    <div class="border-b pb-6">
                        <div class="flex items-center gap-3 mb-3">
                            <span
                                class="px-3 py-1 bg-blue-100 text-blue-700 rounded-md font-semibold text-sm">GET</span>
                            <span class="text-gray-700 font-mono">/attendance</span>
                        </div>
                        <input type="text" id="list-attendance-params"
                            placeholder="?employee_id=1 or ?from=2023-10-01&to=2023-10-31"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg mb-3 font-mono text-sm">
                        <button type="button"
                            onclick="sendRequest('GET', '/attendance', 'list-attendance-params', true, 'list-attendance-response', true)"
                            class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition flex items-center gap-2">
                            <span class="material-icons text-sm">list</span>
                            Get Attendance
                        </button>
                        <div id="list-attendance-response" class="mt-4"></div>
                    </div>

                    <!-- Get Attendance by ID -->
                    <div class="border-b pb-6">
                        <div class="flex items-center gap-3 mb-3">
                            <span
                                class="px-3 py-1 bg-blue-100 text-blue-700 rounded-md font-semibold text-sm">GET</span>
                            <span class="text-gray-700 font-mono">/attendance/:id</span>
                        </div>
                        <input type="number" id="get-attendance-id" placeholder="Attendance ID"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg mb-3">
                        <button type="button"
                            onclick="sendRequestById('GET', '/attendance/', 'get-attendance-id', true, 'get-attendance-response')"
                            class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex items-center gap-2">
                            <span class="material-icons text-sm">event_available</span>
                            Get Attendance
                        </button>
                        <div id="get-attendance-response" class="mt-4"></div>
                    </div>

                    <!-- Update Attendance -->
                    <div class="border-b pb-6">
                        <div class="flex items-center gap-3 mb-3">
                            <span
                                class="px-3 py-1 bg-yellow-100 text-yellow-700 rounded-md font-semibold text-sm">PUT</span>
                            <span class="text-gray-700 font-mono">/attendance/:id</span>
                        </div>
                        <input type="number" id="update-attendance-id" placeholder="Attendance ID"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg mb-3">
                        <textarea id="update-attendance-body" rows="4"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg mb-3 font-mono text-sm">
{
  "check_in_time": "09:45:00"
}</textarea>
                        <button type="button"
                            onclick="sendRequestById('PUT', '/attendance/', 'update-attendance-id', true, 'update-attendance-response', 'update-attendance-body')"
                            class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex items-center gap-2">
                            <span class="material-icons text-sm">edit</span>
                            Update Attendance
                        </button>
                        <div id="update-attendance-response" class="mt-4"></div>
                    </div>

                    <!-- Delete Attendance -->
                    <div>
                        <div class="flex items-center gap-3 mb-3">
                            <span
                                class="px-3 py-1 bg-red-100 text-red-700 rounded-md font-semibold text-sm">DELETE</span>
                            <span class="text-gray-700 font-mono">/attendance/:id</span>
                        </div>
                        <input type="number" id="delete-attendance-id" placeholder="Attendance ID"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg mb-3">
                        <button type="button"
                            onclick="sendRequestById('DELETE', '/attendance/', 'delete-attendance-id', true, 'delete-attendance-response')"
                            class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition flex items-center gap-2">
                            <span class="material-icons text-sm">delete</span>
                            Delete Attendance
                        </button>
                        <div id="delete-attendance-response" class="mt-4"></div>
                    </div>
                </div>
            </div>

            <!-- Reports -->
            <div id="reports" class="bg-white rounded-lg shadow-md overflow-hidden mb-6">
                <div class="bg-orange-600 px-6 py-4 flex items-center justify-between">
                    <div class="flex items-center gap-2 text-white">
                        <span class="material-icons">assessment</span>
                        <h3 class="text-lg font-semibold">Reports</h3>
                    </div>
                    <button type="button" onclick="toggleSection('reports-content')"
                        class="p-2 hover:bg-orange-700 rounded-lg">
                        <span class="material-icons text-white">expand_more</span>
                    </button>
                </div>
                <div id="reports-content" class="endpoint-section p-6">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-md font-semibold text-sm">GET</span>
                        <span class="text-gray-700 font-mono">/reports/attendance</span>
                    </div>
                    <input type="text" id="report-params" placeholder="?month=2023-10 or ?month=2023-10&employee_id=1"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg mb-3 font-mono text-sm">
                    <button type="button"
                        onclick="sendRequest('GET', '/reports/attendance', 'report-params', true, 'report-response', true)"
                        class="px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition flex items-center gap-2">
                        <span class="material-icons text-sm">bar_chart</span>
                        Get Report
                    </button>
                    <div id="report-response" class="mt-4"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            const icon = document.getElementById('sidebarIcon');

            sidebar.classList.toggle('collapsed');

            if (sidebar.classList.contains('collapsed')) {
                mainContent.style.marginLeft = '60px';
                icon.textContent = 'menu_open';
            } else {
                mainContent.style.marginLeft = '256px';
                icon.textContent = 'menu';
            }
        }

        function toggleSection(sectionId) {
            const section = document.getElementById(sectionId);
            section.classList.toggle('collapsed');
        }

        async function sendRequest(method, endpoint, bodyId, requiresAuth, responseId, isParams = false, fileInputId = null) {
            const baseUrl = document.getElementById('baseUrl').value;
            const token = document.getElementById('authToken').value;
            const responseDiv = document.getElementById(responseId);

            let url = baseUrl + endpoint;
            let body = null;
            let headers = {
                'ngrok-skip-browser-warning': 'true'
            };

            if (isParams) {
                const params = document.getElementById(bodyId).value;
                if (params) {
                    url += params.startsWith('?') ? params : '?' + params;
                }
            } else if (method !== 'GET' && method !== 'DELETE') {
                const bodyText = document.getElementById(bodyId).value;

                try {
                    const jsonData = JSON.parse(bodyText);
                    const fileInput = fileInputId ? document.getElementById(fileInputId) : null;

                    if (fileInput && fileInput.files.length > 0) {
                        const formData = new FormData();
                        for (const key in jsonData) {
                            formData.append(key, jsonData[key]);
                        }
                        formData.append('photo', fileInput.files[0]);
                        body = formData;
                        // For FormData, we let fetch set the boundary and Content-Type
                    } else {
                        headers['Content-Type'] = 'application/json';
                        body = JSON.stringify(jsonData);
                    }
                } catch (e) {
                    showResponse(responseDiv, { error: 'Invalid JSON in request body' }, 400);
                    return;
                }
            }

            if (requiresAuth && token) {
                headers['Authorization'] = `Bearer ${token}`;
            }

            try {
                responseDiv.innerHTML = '<div class="text-blue-600 flex items-center gap-2"><span class="material-icons animate-spin">refresh</span>Loading...</div>';
                const response = await fetch(url, {
                    method,
                    headers,
                    body
                });

                // Check if response is JSON
                const contentType = response.headers.get('content-type');
                let data;

                if (contentType && contentType.includes('application/json')) {
                    data = await response.json();
                } else {
                    // Server returned HTML or other non-JSON content
                    const text = await response.text();
                    data = {
                        error: 'Server returned non-JSON response',
                        details: 'The server might be down or the endpoint does not exist',
                        response: text.substring(0, 200) + (text.length > 200 ? '...' : '')
                    };
                }

                showResponse(responseDiv, data, response.status);

                // Auto-fill token if login successful
                if (endpoint === '/auth/login' && data.token) {
                    document.getElementById('authToken').value = data.token;
                }
            } catch (error) {
                showResponse(responseDiv, {
                    error: error.message,
                    hint: 'Make sure the server is running on ' + document.getElementById('baseUrl').value
                }, 500);
            }
        }

        async function sendRequestById(method, endpoint, idInputId, requiresAuth, responseId, bodyId = null) {
            const id = document.getElementById(idInputId).value;
            if (!id) {
                alert('Please enter an ID');
                return;
            }

            const baseUrl = document.getElementById('baseUrl').value;
            const token = document.getElementById('authToken').value;
            const responseDiv = document.getElementById(responseId);

            const url = baseUrl + endpoint + id;
            let body = null;

            if (bodyId && (method === 'PUT' || method === 'POST')) {
                const bodyText = document.getElementById(bodyId).value;
                try {
                    body = JSON.stringify(JSON.parse(bodyText));
                } catch (e) {
                    showResponse(responseDiv, { error: 'Invalid JSON in request body' }, 400);
                    return;
                }
            }

            const headers = {
                'Content-Type': 'application/json',
                'ngrok-skip-browser-warning': 'true'
            };

            if (requiresAuth && token) {
                headers['Authorization'] = `Bearer ${token}`;
            }

            try {
                responseDiv.innerHTML = '<div class="text-blue-600 flex items-center gap-2"><span class="material-icons animate-spin">refresh</span>Loading...</div>';
                const response = await fetch(url, {
                    method,
                    headers,
                    body
                });

                // Check if response is JSON
                const contentType = response.headers.get('content-type');
                let data;

                if (contentType && contentType.includes('application/json')) {
                    data = await response.json();
                } else {
                    // Server returned HTML or other non-JSON content
                    const text = await response.text();
                    data = {
                        error: 'Server returned non-JSON response',
                        details: 'The server might be down or the endpoint does not exist',
                        response: text.substring(0, 200) + (text.length > 200 ? '...' : '')
                    };
                }

                showResponse(responseDiv, data, response.status);
            } catch (error) {
                showResponse(responseDiv, {
                    error: error.message,
                    hint: 'Make sure the server is running on ' + document.getElementById('baseUrl').value
                }, 500);
            }
        }

        function showResponse(div, data, status) {
            const statusColor = status >= 200 && status < 300 ? 'green' : 'red';
            div.innerHTML = `
                <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                    <div class="flex items-center gap-2 mb-2">
                        <span class="px-3 py-1 bg-${statusColor}-100 text-${statusColor}-700 rounded-md font-semibold text-sm flex items-center gap-1">
                            <span class="material-icons text-sm">${status >= 200 && status < 300 ? 'check_circle' : 'error'}</span>
                            Status: ${status}
                        </span>
                    </div>
                    <pre class="response-box bg-gray-900 text-green-400 p-4 rounded-lg text-sm overflow-x-auto">${JSON.stringify(data, null, 2)}</pre>
                </div>
            `;
        }

        // Smooth scroll for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });
    </script>
</body>

</html>